<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Test</title>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700|Playfair+Display:400,700&display=swap&subset=cyrillic"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="foundation-dev.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="menu-container">
      <div class="menu"></div>
    </div>
    <div class="panel-container">
      <div class="panel panel--top">
        <div class="menu--icon"></div>
      </div>
      <!-- <div class="panel panel--bottom"></div> -->
    </div>
    <div class="wrapper">
      <div id="root" class="layout">
        <h1>Header 1</h1>
        <h2>Header 2</h2>

        <div class="grid-x grid-margin-x">
          <div class="cell medium-4 block" onclick="">
            <h3>Header 3</h3>
            <h4>Header 4</h4>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque
              aliquam voluptatibus magnam, commodi fugit totam ipsam atque
              recusandae assumenda consequuntur ullam voluptates ea modi
              cupiditate, repellat. Obcaecati, ad officiis iure illum ullam
              repellendus provident suscipit aut asperiores autem tenetur ipsa
              distinctio, veniam commodi, repudiandae iste voluptate enim
              molestiae vitae a.
            </p>
          </div>
          <div class="cell medium-4 block" onclick="">
            <h3>Header 3</h3>
            <h4>Header 4</h4>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque
              aliquam voluptatibus magnam, commodi fugit totam ipsam atque
              recusandae assumenda consequuntur ullam voluptates ea modi
              cupiditate, repellat. Obcaecati, ad officiis iure illum ullam
              repellendus provident suscipit aut asperiores autem tenetur ipsa
              distinctio, veniam commodi, repudiandae iste voluptate enim
              molestiae vitae a.
            </p>
          </div>
          <div class="cell medium-4 block" onclick="">
            <h3>Header 3</h3>
            <h4>Header 4</h4>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque
              aliquam voluptatibus magnam, commodi fugit totam ipsam atque
              recusandae assumenda consequuntur ullam voluptates ea modi
              cupiditate, repellat. Obcaecati, ad officiis iure illum ullam
              repellendus provident suscipit aut asperiores autem tenetur ipsa
              distinctio, veniam commodi, repudiandae iste voluptate enim
              molestiae vitae a.
            </p>
          </div>
          <div class="cell medium-4 block" onclick="">
            <h3>Header 3</h3>
            <h4>Header 4</h4>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque
              aliquam voluptatibus magnam, commodi fugit totam ipsam atque
              recusandae assumenda consequuntur ullam voluptates ea modi
              cupiditate, repellat. Obcaecati, ad officiis iure illum ullam
              repellendus provident suscipit aut asperiores autem tenetur ipsa
              distinctio, veniam commodi, repudiandae iste voluptate enim
              molestiae vitae a.
            </p>
          </div>
          <div class="cell medium-4 block" onclick="">
            <h3>Header 3</h3>
            <h4>Header 4</h4>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque
              aliquam voluptatibus magnam, commodi fugit totam ipsam atque
              recusandae assumenda consequuntur ullam voluptates ea modi
              cupiditate, repellat. Obcaecati, ad officiis iure illum ullam
              repellendus provident suscipit aut asperiores autem tenetur ipsa
              distinctio, veniam commodi, repudiandae iste voluptate enim
              molestiae vitae a.
            </p>
          </div>
          <div class="cell medium-4 block" onclick="">
            <h3>Header 3</h3>
            <h4>Header 4</h4>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cumque
              aliquam voluptatibus magnam, commodi fugit totam ipsam atque
              recusandae assumenda consequuntur ullam voluptates ea modi
              cupiditate, repellat. Obcaecati, ad officiis iure illum ullam
              repellendus provident suscipit aut asperiores autem tenetur ipsa
              distinctio, veniam commodi, repudiandae iste voluptate enim
              molestiae vitae a.
            </p>
          </div>
        </div>

        <h2>Header 2</h2>

        <div class="block-container">
          <div class="block block--filled" onclick=""></div>
          <div class="block block--filled" onclick=""></div>
          <div class="block block--filled" onclick=""></div>
        </div>
      </div>
    </div>

    <script>
      // Menu Toggle
      function toggleClassMenu() {
        menu.classList.add("menu--animatable");
        if (!menu.classList.contains("menu--visible")) {
          menu.classList.add("menu--visible");
        } else {
          menu.classList.remove("menu--visible");
        }
      }

      function OnTransitionEnd() {
        menu.classList.remove("menu--animatable");
      }

      var menu = document.querySelector(".menu-container");
      var menuTrigger = document.querySelector(".menu--icon");
      menu.addEventListener("transitionend", OnTransitionEnd, false);
      menuTrigger.addEventListener("click", toggleClassMenu, false);
      menu.addEventListener("click", toggleClassMenu, false);
      //

      // flip anim
      function clickHandler() {
        if (!this.classList.contains("expanded")) {
          this.classList.add("expanding");
          this.classList.add("expanded");
          let collapsed = this.getBoundingClientRect();
          this.classList.remove("expanded");
          let expanded = this.getBoundingClientRect();
          this.classList.remove("expanded");

          let invertedTop = collapsed.top - expanded.top;
          let invertedLeft = collapsed.left - expanded.left;
          let invertedWidth = collapsed.width / expanded.width;
          let invertedHeight = collapsed.height / expanded.height;

          this.style.trasformOrigin = "top left";

          this.style.transform =
            "translateX(" +
            invertedLeft +
            "px) translateY(" +
            invertedTop +
            "px) translateZ(0) scaleX(" +
            invertedWidth +
            ") scaleY(" +
            invertedHeight +
            ")";

          this.addEventListener("transitionend", function handler(e) {
            this.style.transform = "";
            this.style.transformOrigin = "";
            this.classList.remove("expanding");
            this.classList.add("expanded");
            this.removeEventListener("transitionend", handler);
          });
        } else if (this.classList.contains("expanded")) {
          requestAnimationFrame(function() {
            this.classList.add("collapsing");
            this.classList.remove("expanded");
            this.classList.add("collapsed");
            var collapsed = this.getBoundingClientRect();
            this.classList.remove("collapsed");
            this.classList.add("expanded");
            var expanded = this.getBoundingClientRect();

            var invertedTop = collapsed.top - expanded.top;
            var invertedLeft = collapsed.left - expanded.left;
            var invertedWidth = collapsed.width / expanded.width;
            var invertedHeight = collapsed.height / expanded.height;

            this.style.transformOrigin = "top left";
            this.style.transform =
              "translate(" +
              invertedLeft +
              "px, " +
              invertedTop +
              "px) scale(" +
              invertedWidth +
              ", " +
              invertedHeight +
              ")";

            this.addEventListener("transitionend", function handler(e) {
              this.style.transform = "";
              this.style.transformOrigin = "";
              this.classList.remove("collapsing");
              this.classList.remove("expanded");
              this.classList.add("collapsed");
              this.removeEventListener("transitionend", handler);
            });
          });
        }
      }

      let blocks = document.querySelectorAll(".block--filled");

      for (let curr of blocks) {
        curr.onclick = clickHandler;
      }
      //
    </script>
  </body>
</html>
